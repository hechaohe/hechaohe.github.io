{"meta":{"title":"hechaoçš„diary","subtitle":"","description":"","author":"hechao","url":"http://yoursite.com","root":"/"},"pages":[],"posts":[{"title":"iOSé™æ€åº“æ‰“åŒ…é—®é¢˜","slug":"iOSé™æ€åº“æ‰“åŒ…é—®é¢˜","date":"2022-04-20T08:44:34.831Z","updated":"2022-04-20T09:14:33.843Z","comments":true,"path":"2022/04/20/iOSé™æ€åº“æ‰“åŒ…é—®é¢˜/","link":"","permalink":"http://yoursite.com/2022/04/20/iOS%E9%9D%99%E6%80%81%E5%BA%93%E6%89%93%E5%8C%85%E9%97%AE%E9%A2%98/","excerpt":"","text":"ä¸€ã€iOSé™æ€åº“æ‰“åŒ….aæ–‡ä»¶1ã€buildç”ŸæˆDebug-iphoneoså’ŒDebug-iphonesimulator lib.aæ–‡ä»¶2ã€åˆæˆæ¨¡æ‹Ÿå™¨å’ŒçœŸæœº.aæ–‡ä»¶ 123lipo -create iphoneos.a iphonesimulator -output new.aExmaple:lipo -create &#x2F;Users&#x2F;hechao&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;SGECNetService-gzmdcobzfojmfaascggxhupdtpym&#x2F;Build&#x2F;Products&#x2F;Debug-iphoneos&#x2F;libSGECNetService.a &#x2F;Users&#x2F;hechao&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;SGECNetService-gzmdcobzfojmfaascggxhupdtpym&#x2F;Build&#x2F;Products&#x2F;Debug-iphonesimulator&#x2F;libSGECNetService.a -output &#x2F;Users&#x2F;hechao&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;SGECNetService-gzmdcobzfojmfaascggxhupdtpym&#x2F;Build&#x2F;Products&#x2F;libSGECNetService.a 3ã€éªŒè¯åˆåŒ…æ˜¯å¦æˆåŠŸ 1lipo -info libSGECNetService.a è¾“å‡ºï¼š 1Architectures in the fat file: &#x2F;Users&#x2F;hechao&#x2F;Library&#x2F;Developer&#x2F;Xcode&#x2F;DerivedData&#x2F;SGECNetService-gzmdcobzfojmfaascggxhupdtpym&#x2F;Build&#x2F;Products&#x2F;libSGECNetService.a are: x86_64 arm64 4ã€å¯¼å…¥å·¥ç¨‹å¼•å…¥.hæ–‡ä»¶ äºŒã€è§£å†³åº“å†²çªæ‰“åŒ…å¥½çš„.aæ–‡ä»¶æœ‰æ—¶åŒ…å«é¡¹ç›®ä¸­å·²å¼•ç”¨çš„ç¬¬ä¸‰æ–¹sdkï¼Œè¿™æ˜¯ä¼šæŠ¥duplicate symbol for architecture arm64(x86_x64) è¿™æ˜¯éœ€è¦ç§»é™¤å†²çªçš„.oæ–‡ä»¶1ã€ä¸€èˆ¬é™æ€åº“éƒ½æ˜¯â€™èƒ–(fat)â€™åº“, é‡Œé¢åŒ…å«å¤šä¸ªæ¶æ„ï¼Œ, è¿™ä¸ªå‘½ä»¤ä¸€èˆ¬ä¼šè¾“å‡º â€œxxx.a are: armv7 x86_64 arm64â€ 1lipo -info lib.a 2ã€æŒ‰ç…§æ¶æ„åˆ†è§£.aï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸åŒæ¶æ„çš„.aæ–‡ä»¶åˆ†è§£å‡ºæ¥ 123lipo -thin arm64 .&#x2F;lib.a -output .&#x2F;arm64.alipo -thin armv7 .&#x2F;lib.a -output .&#x2F;armv7.alipo -thin x86_64 .&#x2F;lib.a -output .&#x2F;x86_64.a 3ã€æŸ¥çœ‹.aæ–‡ä»¶åŒ…å«çš„.oæ–‡ä»¶ 1ar -v -t .&#x2F;arm64.a 4ã€åˆ é™¤.aæ–‡ä»¶ä¸­åŒ…å«çš„.oæ–‡ä»¶æ ¹æ®å®é™…æƒ…å†µï¼Œåˆ é™¤åŒ…å«çš„.oæ–‡ä»¶ï¼Œæ¯ä¸ªæ¶æ„éƒ½è¦åˆ é™¤ 123ar -v -d arm64.a AFURLSessionManager.o ar -v -d armv7.a AFURLSessionManager.o ar -v -d x86_64.a AFURLSessionManager.o 5ã€æœ€ååˆå¹¶æ‰€æœ‰æ¶æ„çš„.aæ–‡ä»¶æˆä¸€ä¸ªæ–°çš„.aèƒ–åŒ… 1lipo -create .&#x2F;arm64.a .&#x2F;armv7.a .&#x2F;x86_64.a -output .&#x2F;lib.a Finishï¼ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯ğŸ¯","categories":[],"tags":[]},{"title":"wkwebviewå¯Œæ–‡æœ¬é«˜åº¦","slug":"wkwebviewå¯Œæ–‡æœ¬é«˜åº¦","date":"2021-02-08T05:45:20.160Z","updated":"2021-06-19T10:18:22.892Z","comments":true,"path":"2021/02/08/wkwebviewå¯Œæ–‡æœ¬é«˜åº¦/","link":"","permalink":"http://yoursite.com/2021/02/08/wkwebview%E5%AF%8C%E6%96%87%E6%9C%AC%E9%AB%98%E5%BA%A6/","excerpt":"","text":"è·å–åˆ°è¿”å›çš„å¯Œæ–‡æœ¬ä¿¡æ¯ï¼Œæ‹¼æ¥æˆhtml 12NSString *str &#x3D; [NSString stringWithFormat:@&quot;&lt;html&gt;&lt;meta charset&#x3D;\\&quot;utf-8\\&quot;&gt;&lt;meta name&#x3D;\\&quot;viewport\\&quot;content&#x3D;\\&quot;width&#x3D;device-width, initial-scale&#x3D;1.0, minimum-scale&#x3D;1.0, maximum-scale&#x3D;1.0, user-scalable&#x3D;no\\&quot;&gt;&lt;title&gt;&lt;&#x2F;title&gt;&lt;head&gt;&lt;script type&#x3D;\\&quot;text&#x2F;javascript\\&quot;&gt;window.onload &#x3D; function() &#123;window.location.href &#x3D; \\&quot;ready:&#x2F;&#x2F;\\&quot; + document.body.scrollHeight;&#125;&lt;&#x2F;script&gt;&lt;&#x2F;head&gt;&lt;body&gt;%@&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&quot;,self.model.content];[self.webView loadHTMLString:str baseURL:nil]; è°ƒç”¨wkwebview çš„ä»£ç†æ–¹æ³• 12345678910111213141516171819202122232425- (void)webView:(WKWebView *)webView decidePolicyForNavigationAction:(WKNavigationAction *)navigationAction decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler &#123; if (navigationAction.navigationType &#x3D;&#x3D; WKNavigationTypeOther) &#123; if ([[[navigationAction.request URL] scheme] isEqualToString:@&quot;ready&quot;]) &#123; float contentHeight &#x3D; [[[navigationAction.request URL] host] floatValue]; CGRect webFrame &#x3D; self.webView.frame; webFrame.size.height &#x3D; contentHeight; webView.frame &#x3D; webFrame; NSLog(@&quot;onload &#x3D; %f&quot;,contentHeight); self.containerScrollView.contentSize &#x3D; CGSizeMake(self.view.width, self.webView.top + contentHeight); CGFloat webViewHeight &#x3D; (contentHeight &lt; self.view.height) ? contentHeight :self.view.height; self.webView.height &#x3D; webViewHeight &lt;&#x3D; 0.1 ?0.1 :webViewHeight; decisionHandler(WKNavigationActionPolicyCancel); return; &#125; &#125; decisionHandler(WKNavigationActionPolicyAllow); &#125; è·å–åˆ°htmlé«˜åº¦","categories":[],"tags":[]},{"title":"uilabelå¯Œæ–‡æœ¬","slug":"uilabelå¯Œæ–‡æœ¬","date":"2021-02-08T05:45:20.160Z","updated":"2021-06-19T10:23:33.600Z","comments":true,"path":"2021/02/08/uilabelå¯Œæ–‡æœ¬/","link":"","permalink":"http://yoursite.com/2021/02/08/uilabel%E5%AF%8C%E6%96%87%E6%9C%AC/","excerpt":"","text":"è¿”å›çš„HTMLæ–‡æœ¬ 12345NSString *htmlStr &#x3D; [NSString stringWithFormat:@&quot;&lt;head&gt;&lt;style&gt;img&#123;width:%f !important;height:auto&#125;&lt;&#x2F;style&gt;&lt;&#x2F;head&gt;%@&quot;,SCREEN_WIDTH - WW(36),_model.content]; &#x2F;&#x2F;å¯Œæ–‡æœ¬ï¼Œä¸¤ç§éƒ½å¯ä»¥NSDictionary *options &#x3D; @&#123; NSDocumentTypeDocumentAttribute : NSHTMLTextDocumentType, NSCharacterEncodingDocumentAttribute :@(NSUTF8StringEncoding) &#125;;NSData *data &#x3D; [htmlStr dataUsingEncoding:NSUTF8StringEncoding]; æˆ–è€… 12NSDictionary *option &#x3D; @&#123;NSDocumentTypeDocumentAttribute : NSHTMLTextDocumentType&#125;;NSData *data &#x3D; [htmlStr dataUsingEncoding:NSUnicodeStringEncoding]; è®¾ç½®å¯Œæ–‡æœ¬ 1234567NSMutableAttributedString *attStr &#x3D; [[NSMutableAttributedString alloc] initWithData:data options:options documentAttributes:nil error:nil];&#x2F;&#x2F;è®¾ç½®æ®µè½æ ¼å¼NSMutableParagraphStyle *para &#x3D; [[NSMutableParagraphStyle alloc] init];para.lineSpacing &#x3D; 7;para.paragraphSpacing &#x3D; 10;[attStr addAttribute:NSParagraphStyleAttributeName value:para range:NSMakeRange(0, attStr.length)];self.richTextLb.attributedText &#x3D; attStr; å¯ä»¥ç›´æ¥ä½¿ç”¨htmlæ ·å¼ 123456789NSString *str &#x3D; @&quot;&lt;font color&#x3D;\\&quot;#6c6c6c\\&quot;&gt;æ»¡20å‡5 æ»¡40å‡15ï¼Œè¿˜å‰©&lt;font color&#x3D;\\&quot;#ff9147\\&quot;&gt;113å¤©&quot;;UILabel *label &#x3D; [[UILabel alloc] initWithFrame:CGRectMake(30, 50, 300, 50)];NSAttributedString *attrStr &#x3D; [[NSAttributedString alloc] initWithData:[str dataUsingEncoding:NSUnicodeStringEncoding] options:@&#123;NSDocumentTypeDocumentAttribute:NSHTMLTextDocumentType&#125; documentAttributes:nil error:nil];label.attributedText &#x3D; attrStr;&#x2F;&#x2F;å¦‚æœæƒ³è¦æ”¹å˜æ–‡å­—çš„å­—ä½“,è¯·åœ¨è®¾ç½®attributedTextä¹‹åè®¾ç½®label.font &#x3D; [UIFont systemFontOfSize:20];[self.view addSubview:label];","categories":[],"tags":[]},{"title":"å…³äºmasnoryå¸ƒå±€","slug":"å…³äºmasonryå¸ƒå±€","date":"2021-01-13T03:47:23.489Z","updated":"2021-06-19T10:12:03.323Z","comments":true,"path":"2021/01/13/å…³äºmasonryå¸ƒå±€/","link":"","permalink":"http://yoursite.com/2021/01/13/%E5%85%B3%E4%BA%8Emasonry%E5%B8%83%E5%B1%80/","excerpt":"","text":"mas_remakeConstraintsmas_updateConstraintsmas_makeConstraintsUIViewAlertForUnsatisfiableConstraints //æ˜¾ç¤ºå¤šåˆ—æŒ‰é’® 123456NSArray *viewArray &#x3D; @[buyBtn, saleBtn, remindBtn];[viewArray mas_distributeViewsAlongAxis:MASAxisTypeHorizontal withFixedItemLength:70 leadSpacing:10 tailSpacing:5];[viewArray makeConstraints:^(MASConstraintMaker *make) &#123; make.centerY.equalTo(bottomView); make.height.equalTo(35);&#125;]; masonry åŠ¨ç”» [self.view addSubview:self.filterView]; [self.filterView mas_makeConstraints:^(MASConstraintMaker *make) { make.left.mas_equalTo(SCREEN_WIDTH); make.top.mas_equalTo(self.operatView.mas_bottom); make.width.mas_equalTo(SCREEN_WIDTH); make.bottom.mas_equalTo(0); }]; self.operatView.operatSilterBlock = ^{ [UIView animateWithDuration:0.3 animations:^{ weakSelf.filterView.hidden = NO; [weakSelf.filterView mas_updateConstraints:^(MASConstraintMaker *make) { make.left.mas_equalTo(0); }]; // éœ€è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³• [weakSelf.view layoutIfNeeded]; }]; };","categories":[],"tags":[]},{"title":"blockçš„ä½¿ç”¨","slug":"blockçš„ä½¿ç”¨","date":"2020-07-22T08:11:20.000Z","updated":"2021-06-17T15:21:19.304Z","comments":true,"path":"2020/07/22/blockçš„ä½¿ç”¨/","link":"","permalink":"http://yoursite.com/2020/07/22/block%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"è¿”å›ç±»å‹ åç§° å‚æ•°ç±»å‹ 123456789101112131415161718void (^loggerBlock)(void) &#x3D; ^void(void) &#123; NSLog(@&quot;hello&quot;);&#125;;loggerBlock();void (^loggerBlockWithString)(NSString *) &#x3D; ^void(NSString *str) &#123; NSLog(@&quot;hello %@ï¼&quot;,str);&#125;;NSString *str &#x3D; @&quot;å°**&quot;;loggerBlockWithString(str);NSString *str1 &#x3D; @&quot;hello å°**&quot;;self.propertyBlock &#x3D; ^(NSString *str) &#123; NSLog(@&quot;%@&quot;,str);&#125;;self.propertyBlock(str1); // åå°æ‰§è¡Œ 123dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; &#125;); // ä¸»çº¿ç¨‹ 123dispatch_async(dispatch_get_main_queue(), ^&#123; &#125;); // æ‰§è¡Œä¸€æ¬¡ 1234static dispatch_once_t onceToken;dispatch_once(&amp;onceToken, ^&#123; &#125;); // å»¶è¿Ÿ 123dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; &#125;); // åå°ä¸¤ä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Œç­‰ä¸¤ä¸ªéƒ½ç»“æŸä¹‹åï¼Œæ‰§è¡Œç»“æœ 12345678910dispatch_group_t group &#x3D; dispatch_group_create();dispatch_group_async(group, dispatch_get_global_queue(0, 0), ^&#123; NSLog(@&quot;è¿™æ˜¯111111111&quot;);&#125;);dispatch_group_async(group, dispatch_get_global_queue(0, 0), ^&#123; NSLog(@&quot;è¿™æ˜¯222222222&quot;);&#125;);dispatch_group_notify(group, dispatch_get_global_queue(0, 0), ^&#123; NSLog(@&quot;1å’Œ2éƒ½å®Œæˆäº†&quot;);&#125;); // ä¿®æ”¹blockä¹‹å¤–çš„å˜é‡ 1234567__block int a &#x3D; 10;void(^foo)(void) &#x3D; ^&#123; a++;&#125;;NSLog(@&quot;açš„å€¼ä¸ºï¼š%d&quot;,a);foo();NSLog(@&quot;açš„å€¼ä¸ºï¼š%d&quot;,a); ä½¿ç”¨ block çš„å¦ä¸€ä¸ªç”¨å¤„æ˜¯å¯ä»¥è®©ç¨‹åºåœ¨åå°è¾ƒé•¿ä¹…çš„è¿è¡Œåœ¨ä»¥å‰ï¼Œå½“ app è¢«æŒ‰ home é”®é€€å‡ºåï¼Œapp ä»…æœ‰æœ€å¤š 5 ç§’é’Ÿçš„æ—¶å€™åšä¸€äº›ä¿å­˜æˆ–æ¸…ç†èµ„æºçš„å·¥ä½œã€‚ä½†æ˜¯åº”ç”¨å¯ä»¥è°ƒç”¨ UIApplication çš„beginBackgroundTaskWithExpirationHandleræ–¹æ³•ï¼Œè®© app æœ€å¤šæœ‰ 10 åˆ†é’Ÿçš„æ—¶é—´åœ¨åå°é•¿ä¹…è¿è¡Œã€‚è¿™ä¸ªæ—¶é—´å¯ä»¥ç”¨æ¥åšæ¸…ç†æœ¬åœ°ç¼“å­˜ï¼Œå‘é€ç»Ÿè®¡æ•°æ®ç­‰å·¥ä½œ 1234567891011121314151617181920212223242526- (void)sceneDidEnterBackground:(UIScene *)scene &#123; &#x2F;&#x2F; Called as the scene transitions from the foreground to the background. &#x2F;&#x2F; Use this method to save data, release shared resources, and store enough scene-specific state information &#x2F;&#x2F; to restore the scene back to its current state. [self beingBackgroundUpdateTask]; &#x2F;&#x2F; åœ¨è¿™é‡ŒåŠ ä¸Šä½ éœ€è¦é•¿ä¹…è¿è¡Œçš„ä»£ç  for (int i &#x3D; 0; i &lt; 100; i++) &#123; NSLog(@&quot;%d&quot;,i); &#125; sleep(2); NSLog(@&quot;222222222&quot;); [self endBackgroundUpdateTask];&#125;- (void)beingBackgroundUpdateTask &#123; self.backgroundUpdateTask &#x3D; [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^&#123; &#125;];&#125;- (void)endBackgroundUpdateTask &#123; [[UIApplication sharedApplication] endBackgroundTask:self.backgroundUpdateTask]; self.backgroundUpdateTask &#x3D; UIBackgroundTaskInvalid;&#125;","categories":[],"tags":[]},{"title":"ç¦»å±æ¸²æŸ“","slug":"ç¦»å±æ¸²æŸ“","date":"2020-07-21T08:27:55.000Z","updated":"2020-07-21T08:28:43.448Z","comments":true,"path":"2020/07/21/ç¦»å±æ¸²æŸ“/","link":"","permalink":"http://yoursite.com/2020/07/21/%E7%A6%BB%E5%B1%8F%E6%B8%B2%E6%9F%93/","excerpt":"","text":"ä¸‹é¢å‡ ç§æƒ…å†µä¼šè§¦å‘ç¦»å±æ¸²æŸ“ï¼š1ã€ä½¿ç”¨äº†maskçš„layer(layer.mask)2ã€éœ€è¦è¿›è¡Œè£å‰ªçš„layer(layer.maskToBounds / view.clipsToBounds)3ã€è®¾ç½®äº†ç»„é€æ˜åº¦ä¸ºyesï¼Œå¹¶ä¸”é€æ˜åº¦ä¸ä¸º1çš„layer(layer.allowGroupOpacity / layer.opacity)4ã€æ·»åŠ äº†æŠ•å½±çš„layer(layer.shadow)5ã€é‡‡ç”¨äº†å…‰æ …åŒ–çš„layer(layer.shouldRasterize)6ã€ç»˜åˆ¶äº†æ–‡å­—çš„layer(UILabel,CATextLayer,Core Textç­‰)","categories":[],"tags":[]}],"categories":[],"tags":[]}